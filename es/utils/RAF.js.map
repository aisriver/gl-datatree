{"version":3,"sources":["utils/RAF.js"],"names":["RAF","_timerIdMap","timeout","interval","type","cb","now","Date","startTime","endTime","timerSymbol","Symbol","loop","setIdMap","clearTimeout","id","requestAnimationFrame","run","timer","cancelAnimationFrame"],"mappings":";;;;;;AAAA,OAAO,SAAP,C,CAAkB;;IACGA,G;AACjB,iBAAc;AAAA;;AACV,SAAKC,WAAL,GAAmB;AACfC,MAAAA,OAAO,EAAE,EADM;AAEfC,MAAAA,QAAQ,EAAE;AAFK,KAAnB;AAIH;;;;0BAC2C;AAAA;;AAAA,UAAxCC,IAAwC,uEAAjC,UAAiC;AAAA,UAArBC,EAAqB;AAAA,UAAjBF,QAAiB,uEAAN,IAAM;AACxC,UAAMG,GAAG,GAAGC,IAAI,CAACD,GAAjB;AACA,UAAIE,SAAS,GAAGF,GAAG,EAAnB;AACA,UAAIG,OAAO,GAAGD,SAAd;AACA,UAAME,WAAW,GAAGC,MAAM,EAA1B;;AACA,UAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AACf,QAAA,KAAI,CAACC,QAAL,CAAcH,WAAd,EAA2BN,IAA3B,EAAiCQ,IAAjC;;AACAH,QAAAA,OAAO,GAAGH,GAAG,EAAb;;AACA,YAAIG,OAAO,GAAGD,SAAV,IAAuBL,QAA3B,EAAqC;AACjC,cAAIC,IAAI,KAAK,UAAb,EAAyB;AACrBI,YAAAA,SAAS,GAAGF,GAAG,EAAf;AACAG,YAAAA,OAAO,GAAGD,SAAV;AACH;;AACDH,UAAAA,EAAE;AACFD,UAAAA,IAAI,KAAK,SAAT,IAAsB,KAAI,CAACU,YAAL,CAAkBJ,WAAlB,CAAtB;AACH;AACJ,OAXD;;AAYA,WAAKG,QAAL,CAAcH,WAAd,EAA2BN,IAA3B,EAAiCQ,IAAjC;AACA,aAAOF,WAAP;AACH;;;6BACQA,W,EAAaN,I,EAAMQ,I,EAAM;AAC9B,UAAMG,EAAE,GAAGC,qBAAqB,CAACJ,IAAD,CAAhC;AACA,WAAKX,WAAL,CAAiBG,IAAjB,EAAuBM,WAAvB,IAAsCK,EAAtC;AACH;;;+BACUV,E,EAAIF,Q,EAAU;AACrB,aAAO,KAAKc,GAAL,CAAS,SAAT,EAAoBZ,EAApB,EAAwBF,QAAxB,CAAP;AACH;;;iCACYe,K,EAAO;AAChBC,MAAAA,oBAAoB,CAAC,KAAKlB,WAAL,CAAiBC,OAAjB,CAAyBgB,KAAzB,CAAD,CAApB;AACH;;;gCACWb,E,EAAIF,Q,EAAU;AACtB,aAAO,KAAKc,GAAL,CAAS,UAAT,EAAqBZ,EAArB,EAAyBF,QAAzB,CAAP;AACH;;;kCACae,K,EAAO;AACjBC,MAAAA,oBAAoB,CAAC,KAAKlB,WAAL,CAAiBE,QAAjB,CAA0Be,KAA1B,CAAD,CAApB;AACH;;;;;;SA1CgBlB,G","sourcesContent":["import 'core-js'; // 解决Symbol报错的问题\nexport default class RAF {\n    constructor() {\n        this._timerIdMap = {\n            timeout: {},\n            interval: {},\n        };\n    }\n    run(type = 'interval', cb, interval = 16.7) {\n        const now = Date.now;\n        let startTime = now();\n        let endTime = startTime;\n        const timerSymbol = Symbol();\n        const loop = () => {\n            this.setIdMap(timerSymbol, type, loop);\n            endTime = now();\n            if (endTime - startTime >= interval) {\n                if (type === 'interval') {\n                    startTime = now();\n                    endTime = startTime;\n                }\n                cb();\n                type === 'timeout' && this.clearTimeout(timerSymbol);\n            }\n        };\n        this.setIdMap(timerSymbol, type, loop);\n        return timerSymbol;\n    }\n    setIdMap(timerSymbol, type, loop) {\n        const id = requestAnimationFrame(loop);\n        this._timerIdMap[type][timerSymbol] = id;\n    }\n    setTimeout(cb, interval) {\n        return this.run('timeout', cb, interval);\n    }\n    clearTimeout(timer) {\n        cancelAnimationFrame(this._timerIdMap.timeout[timer]);\n    }\n    setInterval(cb, interval) {\n        return this.run('interval', cb, interval);\n    }\n    clearInterval(timer) {\n        cancelAnimationFrame(this._timerIdMap.interval[timer]);\n    }\n}\n"],"file":"RAF.js"}